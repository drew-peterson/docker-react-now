sudo: required
language: node_js
services:
  - docker
node_js:
  - "node"
cache: yarn
before_install:
  # - docker build -t weeznog/docker-react-now -f ./client/Dockerfile.dev ./client
  - yarn add now
script:
  - echo "skipping tests"
  # - docker run weeznog/docker-react-now yarn test -- --coverage
# before_deploy: yarn add now
deploy:
  - provider: script
    script: bash deploy-stage.sh
    skip_cleanup: true
    on:
      branch: stage
      # all_branches: true
      # master: false
  - provider: script
    env:
      - API_ENV_TEST="from travis file"
      - API_ENV_TEST_2="from travis file 2"
      - REACT_APP_TRAVIS_2="env from travis 2"
    script: bash deploy-prod.sh
    skip_cleanup: true
    on:
      branch: master
notifications:
  email: false
